<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Movies</title>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.1.1/socket.io.js"></script>
</head>
<body>
    <div id="movieContainter">

    </div>
    <script>
        var socket = io("/Movies")
        var videos = []
        socket.on("videos", (data) => {
            console.log(data)
            var div = document.getElementById("movieContainter")
            for(i = 0; i < data.length; i++) {
                videos.push(data[i])
                var pTag = document.createElement("p")
                pTag.innerHTML = data[i]
                pTag.setAttribute("name", data[i])
                document.body.appendChild(pTag)
                CallEvent(pTag)
                
                
            }
        })
        function CallEvent(pTag) {
            pTag.addEventListener("click", () => {
                socket.emit("videoClicked", {MovieClicked: pTag.getAttribute("name")})
                console.log(pTag.getAttribute("name"))        
            })
        }
        socket.on("movie", (MovieData) => {
            document.location.replace("http://localhost:3001/" + MovieData.Title + "?id=" + MovieData.ID)
        })



    </script>
</body>
</html>